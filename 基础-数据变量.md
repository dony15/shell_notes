# 基础-数据变量

[TOC]

### 1.数据结构

脚本语言,解析型数据结构,一般不需要数据类型修饰

常用类型有字符串和数字

##### 字符串

```shell
var1='hello${demo}' #单引号无法解析字符串中的变量和函数指令等信息,常用于防篡改使用
var2="hello${demo}" #双引号修饰的字符串中可以直接解析变量和函数指令等信息
```



##### 数字

```shell
var1=123 #没有什么特殊的= = .
```



##### 数组

bash支持一维数组,元素间空格分隔开

1. 使用小括号定义
2. 元素类型不限
3. 元素数量不限



```shell
#数组定义方式1
数组名=(元素1 元素2 ... 元素n)
#数组定义方式2
数组名=(
元素1
元素2
...
元素n
)
#数组定义方式3
数组名[0]=value0
数组名[1]=value1
数组名[2]=value2

#数组读取方式
${数组名}  #默认读取第一个元素
${数组名[index]} #获取数组指定下标的元素
${数组名[@]} #@符号可以获取数组中所有的元素

#获取数组长度方式1
length=${#数组名[@]}
#获取数组长度方式2
length=${#数组名[*]}
#获取数组中指定元素的长度
length=${#数组名[index]}
```





### 2.变量

一般情况下,数据需要通过生成变量使用

```shell
username="Dony15" #定义变量
var2=${username}  #使用变量
echo= ${username} #使用变量
```



##### 变量类型

1. **局部变量**:局部变量定义在命令中或者脚本中,仅在当前shell实例中有效,其他shell启动的程序不能访问
2. **环境变量**:所有程序,包括shell启动的程序都可以访问环境变量,有些程序需要环境变量保证运行,必要的时候shell脚本也可以定义环境变量,我们做项目脚本时常用的一种变量
3. **shell变量**:由shell程序设计的特殊变量,一部分是环境变量,一部分是局部变量,保障shell的正常运行



##### 变量的常用方法

```shell
var1=${username-"root"} #将变量username的值替换为root
var2=${username:-"root"} #当变量username没有设置或者为空时,username的值替换为root
var3=${#username} #打印变量username值的字符长度
readonly username #设置变量username为只读变量,不可修改和删除
unset username2 #删除变量username2,不能删除只读变量
${username:2:4} #提取子字符串(python中的切片)
`expr index "${username}" do` #查找子字符串,username变量中,字符d或者o的下标位置(返回第一个匹配位置后停止)

```





